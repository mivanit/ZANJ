window.pdocSearch = (function(){
/** elasticlunr - http://weixsong.github.io * Copyright (C) 2017 Oliver Nightingale * Copyright (C) 2017 Wei Song * MIT Licensed */!function(){function e(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.9.5",lunr=t,t.utils={},t.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),t.utils.toString=function(e){return void 0===e||null===e?"":e.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},t.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);-1!==n&&(this.events[e].splice(n,1),0==this.events[e].length&&delete this.events[e])}},t.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)},this)}},t.EventEmitter.prototype.hasHandler=function(e){return e in this.events},t.tokenizer=function(e){if(!arguments.length||null===e||void 0===e)return[];if(Array.isArray(e)){var n=e.filter(function(e){return null===e||void 0===e?!1:!0});n=n.map(function(e){return t.utils.toString(e).toLowerCase()});var i=[];return n.forEach(function(e){var n=e.split(t.tokenizer.seperator);i=i.concat(n)},this),i}return e.toString().trim().toLowerCase().split(t.tokenizer.seperator)},t.tokenizer.defaultSeperator=/[\s\-]+/,t.tokenizer.seperator=t.tokenizer.defaultSeperator,t.tokenizer.setSeperator=function(e){null!==e&&void 0!==e&&"object"==typeof e&&(t.tokenizer.seperator=e)},t.tokenizer.resetSeperator=function(){t.tokenizer.seperator=t.tokenizer.defaultSeperator},t.tokenizer.getSeperator=function(){return t.tokenizer.seperator},t.Pipeline=function(){this._queue=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in t.Pipeline.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[n]=e},t.Pipeline.getRegisteredFunction=function(e){return e in t.Pipeline.registeredFunctions!=!0?null:t.Pipeline.registeredFunctions[e]},t.Pipeline.warnIfFunctionNotRegistered=function(e){var n=e.label&&e.label in this.registeredFunctions;n||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var i=t.Pipeline.getRegisteredFunction(e);if(!i)throw new Error("Cannot load un-registered function: "+e);n.add(i)}),n},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._queue.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i+1,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i,0,n)},t.Pipeline.prototype.remove=function(e){var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},t.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,i=this._queue.length,o=0;n>o;o++){for(var r=e[o],s=0;i>s&&(r=this._queue[s](r,o,e),void 0!==r&&null!==r);s++);void 0!==r&&null!==r&&t.push(r)}return t},t.Pipeline.prototype.reset=function(){this._queue=[]},t.Pipeline.prototype.get=function(){return this._queue},t.Pipeline.prototype.toJSON=function(){return this._queue.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.DocumentStore,this.index={},this.eventEmitter=new t.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},t.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;n._fields=e.fields,n._ref=e.ref,n.documentStore=t.DocumentStore.load(e.documentStore),n.pipeline=t.Pipeline.load(e.pipeline),n.index={};for(var i in e.index)n.index[i]=t.InvertedIndex.load(e.index[i]);return n},t.Index.prototype.addField=function(e){return this._fields.push(e),this.index[e]=new t.InvertedIndex,this},t.Index.prototype.setRef=function(e){return this._ref=e,this},t.Index.prototype.saveDocument=function(e){return this.documentStore=new t.DocumentStore(e),this},t.Index.prototype.addDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.addDoc(i,e),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));this.documentStore.addFieldLength(i,n,o.length);var r={};o.forEach(function(e){e in r?r[e]+=1:r[e]=1},this);for(var s in r){var u=r[s];u=Math.sqrt(u),this.index[n].addToken(s,{ref:i,tf:u})}},this),n&&this.eventEmitter.emit("add",e,this)}},t.Index.prototype.removeDocByRef=function(e){if(e&&this.documentStore.isDocStored()!==!1&&this.documentStore.hasDoc(e)){var t=this.documentStore.getDoc(e);this.removeDoc(t,!1)}},t.Index.prototype.removeDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.hasDoc(i)&&(this.documentStore.removeDoc(i),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));o.forEach(function(e){this.index[n].removeToken(e,i)},this)},this),n&&this.eventEmitter.emit("remove",e,this))}},t.Index.prototype.updateDoc=function(e,t){var t=void 0===t?!0:t;this.removeDocByRef(e[this._ref],!1),this.addDoc(e,!1),t&&this.eventEmitter.emit("update",e,this)},t.Index.prototype.idf=function(e,t){var n="@"+t+"/"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,n))return this._idfCache[n];var i=this.index[t].getDocFreq(e),o=1+Math.log(this.documentStore.length/(i+1));return this._idfCache[n]=o,o},t.Index.prototype.getFields=function(){return this._fields.slice()},t.Index.prototype.search=function(e,n){if(!e)return[];e="string"==typeof e?{any:e}:JSON.parse(JSON.stringify(e));var i=null;null!=n&&(i=JSON.stringify(n));for(var o=new t.Configuration(i,this.getFields()).get(),r={},s=Object.keys(e),u=0;u<s.length;u++){var a=s[u];r[a]=this.pipeline.run(t.tokenizer(e[a]))}var l={};for(var c in o){var d=r[c]||r.any;if(d){var f=this.fieldSearch(d,c,o),h=o[c].boost;for(var p in f)f[p]=f[p]*h;for(var p in f)p in l?l[p]+=f[p]:l[p]=f[p]}}var v,g=[];for(var p in l)v={ref:p,score:l[p]},this.documentStore.hasDoc(p)&&(v.doc=this.documentStore.getDoc(p)),g.push(v);return g.sort(function(e,t){return t.score-e.score}),g},t.Index.prototype.fieldSearch=function(e,t,n){var i=n[t].bool,o=n[t].expand,r=n[t].boost,s=null,u={};return 0!==r?(e.forEach(function(e){var n=[e];1==o&&(n=this.index[t].expandToken(e));var r={};n.forEach(function(n){var o=this.index[t].getDocs(n),a=this.idf(n,t);if(s&&"AND"==i){var l={};for(var c in s)c in o&&(l[c]=o[c]);o=l}n==e&&this.fieldSearchStats(u,n,o);for(var c in o){var d=this.index[t].getTermFrequency(n,c),f=this.documentStore.getFieldLength(c,t),h=1;0!=f&&(h=1/Math.sqrt(f));var p=1;n!=e&&(p=.15*(1-(n.length-e.length)/n.length));var v=d*a*h*p;c in r?r[c]+=v:r[c]=v}},this),s=this.mergeScores(s,r,i)},this),s=this.coordNorm(s,u,e.length)):void 0},t.Index.prototype.mergeScores=function(e,t,n){if(!e)return t;if("AND"==n){var i={};for(var o in t)o in e&&(i[o]=e[o]+t[o]);return i}for(var o in t)o in e?e[o]+=t[o]:e[o]=t[o];return e},t.Index.prototype.fieldSearchStats=function(e,t,n){for(var i in n)i in e?e[i].push(t):e[i]=[t]},t.Index.prototype.coordNorm=function(e,t,n){for(var i in e)if(i in t){var o=t[i].length;e[i]=e[i]*o/n}return e},t.Index.prototype.toJSON=function(){var e={};return this._fields.forEach(function(t){e[t]=this.index[t].toJSON()},this),{version:t.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:e,pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},t.DocumentStore=function(e){this._save=null===e||void 0===e?!0:e,this.docs={},this.docInfo={},this.length=0},t.DocumentStore.load=function(e){var t=new this;return t.length=e.length,t.docs=e.docs,t.docInfo=e.docInfo,t._save=e.save,t},t.DocumentStore.prototype.isDocStored=function(){return this._save},t.DocumentStore.prototype.addDoc=function(t,n){this.hasDoc(t)||this.length++,this.docs[t]=this._save===!0?e(n):null},t.DocumentStore.prototype.getDoc=function(e){return this.hasDoc(e)===!1?null:this.docs[e]},t.DocumentStore.prototype.hasDoc=function(e){return e in this.docs},t.DocumentStore.prototype.removeDoc=function(e){this.hasDoc(e)&&(delete this.docs[e],delete this.docInfo[e],this.length--)},t.DocumentStore.prototype.addFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&(this.docInfo[e]||(this.docInfo[e]={}),this.docInfo[e][t]=n)},t.DocumentStore.prototype.updateFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&this.addFieldLength(e,t,n)},t.DocumentStore.prototype.getFieldLength=function(e,t){return null===e||void 0===e?0:e in this.docs&&t in this.docInfo[e]?this.docInfo[e][t]:0},t.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},t.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",i="[aeiouy]",o=n+"[^aeiouy]*",r=i+"[aeiou]*",s="^("+o+")?"+r+o,u="^("+o+")?"+r+o+"("+r+")?$",a="^("+o+")?"+r+o+r+o,l="^("+o+")?"+i,c=new RegExp(s),d=new RegExp(a),f=new RegExp(u),h=new RegExp(l),p=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,m=/^(.+?)(ed|ing)$/,y=/.$/,S=/(at|bl|iz)$/,x=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+o+i+"[^aeiouwxy]$"),I=/^(.+?[^aeiou])y$/,b=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,D=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,F=/^(.+?)(s|t)(ion)$/,_=/^(.+?)e$/,P=/ll$/,k=new RegExp("^"+o+i+"[^aeiouwxy]$"),z=function(n){var i,o,r,s,u,a,l;if(n.length<3)return n;if(r=n.substr(0,1),"y"==r&&(n=r.toUpperCase()+n.substr(1)),s=p,u=v,s.test(n)?n=n.replace(s,"$1$2"):u.test(n)&&(n=n.replace(u,"$1$2")),s=g,u=m,s.test(n)){var z=s.exec(n);s=c,s.test(z[1])&&(s=y,n=n.replace(s,""))}else if(u.test(n)){var z=u.exec(n);i=z[1],u=h,u.test(i)&&(n=i,u=S,a=x,l=w,u.test(n)?n+="e":a.test(n)?(s=y,n=n.replace(s,"")):l.test(n)&&(n+="e"))}if(s=I,s.test(n)){var z=s.exec(n);i=z[1],n=i+"i"}if(s=b,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+e[o])}if(s=E,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+t[o])}if(s=D,u=F,s.test(n)){var z=s.exec(n);i=z[1],s=d,s.test(i)&&(n=i)}else if(u.test(n)){var z=u.exec(n);i=z[1]+z[2],u=d,u.test(i)&&(n=i)}if(s=_,s.test(n)){var z=s.exec(n);i=z[1],s=d,u=f,a=k,(s.test(i)||u.test(i)&&!a.test(i))&&(n=i)}return s=P,u=d,s.test(n)&&u.test(n)&&(s=y,n=n.replace(s,"")),"y"==r&&(n=r.toLowerCase()+n.substr(1)),n};return z}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.stopWordFilter=function(e){return e&&t.stopWordFilter.stopWords[e]!==!0?e:void 0},t.clearStopWords=function(){t.stopWordFilter.stopWords={}},t.addStopWords=function(e){null!=e&&Array.isArray(e)!==!1&&e.forEach(function(e){t.stopWordFilter.stopWords[e]=!0},this)},t.resetStopWords=function(){t.stopWordFilter.stopWords=t.defaultStopWords},t.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,"do":!0,does:!0,either:!0,"else":!0,ever:!0,every:!0,"for":!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,"if":!0,"in":!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,"this":!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,"while":!0,who:!0,whom:!0,why:!0,will:!0,"with":!0,would:!0,yet:!0,you:!0,your:!0},t.stopWordFilter.stopWords=t.defaultStopWords,t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(e){if(null===e||void 0===e)throw new Error("token should not be undefined");return e.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.InvertedIndex=function(){this.root={docs:{},df:0}},t.InvertedIndex.load=function(e){var t=new this;return t.root=e.root,t},t.InvertedIndex.prototype.addToken=function(e,t,n){for(var n=n||this.root,i=0;i<=e.length-1;){var o=e[i];o in n||(n[o]={docs:{},df:0}),i+=1,n=n[o]}var r=t.ref;n.docs[r]?n.docs[r]={tf:t.tf}:(n.docs[r]={tf:t.tf},n.df+=1)},t.InvertedIndex.prototype.hasToken=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return!1;t=t[e[n]]}return!0},t.InvertedIndex.prototype.getNode=function(e){if(!e)return null;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return null;t=t[e[n]]}return t},t.InvertedIndex.prototype.getDocs=function(e){var t=this.getNode(e);return null==t?{}:t.docs},t.InvertedIndex.prototype.getTermFrequency=function(e,t){var n=this.getNode(e);return null==n?0:t in n.docs?n.docs[t].tf:0},t.InvertedIndex.prototype.getDocFreq=function(e){var t=this.getNode(e);return null==t?0:t.df},t.InvertedIndex.prototype.removeToken=function(e,t){if(e){var n=this.getNode(e);null!=n&&t in n.docs&&(delete n.docs[t],n.df-=1)}},t.InvertedIndex.prototype.expandToken=function(e,t,n){if(null==e||""==e)return[];var t=t||[];if(void 0==n&&(n=this.getNode(e),null==n))return t;n.df>0&&t.push(e);for(var i in n)"docs"!==i&&"df"!==i&&this.expandToken(e+i,t,n[i]);return t},t.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},t.Configuration=function(e,n){var e=e||"";if(void 0==n||null==n)throw new Error("fields should not be null");this.config={};var i;try{i=JSON.parse(e),this.buildUserConfig(i,n)}catch(o){t.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(n)}},t.Configuration.prototype.buildDefaultConfig=function(e){this.reset(),e.forEach(function(e){this.config[e]={boost:1,bool:"OR",expand:!1}},this)},t.Configuration.prototype.buildUserConfig=function(e,n){var i="OR",o=!1;if(this.reset(),"bool"in e&&(i=e.bool||i),"expand"in e&&(o=e.expand||o),"fields"in e)for(var r in e.fields)if(n.indexOf(r)>-1){var s=e.fields[r],u=o;void 0!=s.expand&&(u=s.expand),this.config[r]={boost:s.boost||0===s.boost?s.boost:1,bool:s.bool||i,expand:u}}else t.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(i,o,n)},t.Configuration.prototype.addAllFields2UserConfig=function(e,t,n){n.forEach(function(n){this.config[n]={boost:1,bool:e,expand:t}},this)},t.Configuration.prototype.get=function(){return this.config},t.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},lunr.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},lunr.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},lunr.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;){if(r===e)return o;e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o]}return r===e?o:-1},lunr.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;)e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o];return r>e?o:e>r?o+1:void 0},lunr.SortedSet.prototype.intersect=function(e){for(var t=new lunr.SortedSet,n=0,i=0,o=this.length,r=e.length,s=this.elements,u=e.elements;;){if(n>o-1||i>r-1)break;s[n]!==u[i]?s[n]<u[i]?n++:s[n]>u[i]&&i++:(t.add(s[n]),n++,i++)}return t},lunr.SortedSet.prototype.clone=function(){var e=new lunr.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},lunr.SortedSet.prototype.union=function(e){var t,n,i;this.length>=e.length?(t=this,n=e):(t=e,n=this),i=t.clone();for(var o=0,r=n.toArray();o<r.length;o++)i.add(r[o]);return i},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.elasticlunr=t()}(this,function(){return t})}();
    /** pdoc search index */const docs = [{"fullname": "zanj", "modulename": "zanj", "kind": "module", "doc": "<p><a href=\"https://pypi.org/project/zanj/\"><img src=\"https://img.shields.io/pypi/v/zanj\" alt=\"PyPI\" /></a>\n<a href=\"https://github.com/mivanit/zanj/actions/workflows/checks.yml\"><img src=\"https://github.com/mivanit/zanj/actions/workflows/checks.yml/badge.svg\" alt=\"Checks\" /></a>\n<a href=\"docs/coverage/coverage.txt\"><img src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCI+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+CiAgICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPG1hc2sgaWQ9ImEiPgogICAgICAgIDxyZWN0IHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz4KICAgIDwvbWFzaz4KICAgIDxnIG1hc2s9InVybCgjYSkiPgogICAgICAgIDxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjN2MjBIMHoiLz4KICAgICAgICA8cGF0aCBmaWxsPSIjNGMxIiBkPSJNNjMgMGgzNnYyMEg2M3oiLz4KICAgICAgICA8cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMCAwaDk5djIwSDB6Ii8+CiAgICA8L2c+CiAgICA8ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMSI+CiAgICAgICAgPHRleHQgeD0iMzEuNSIgeT0iMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPmNvdmVyYWdlPC90ZXh0PgogICAgICAgIDx0ZXh0IHg9IjMxLjUiIHk9IjE0Ij5jb3ZlcmFnZTwvdGV4dD4KICAgICAgICA8dGV4dCB4PSI4MCIgeT0iMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPjk1JTwvdGV4dD4KICAgICAgICA8dGV4dCB4PSI4MCIgeT0iMTQiPjk1JTwvdGV4dD4KICAgIDwvZz4KPC9zdmc+Cg==\" alt=\"Coverage\" /></a>\n<img src=\"https://img.shields.io/github/languages/code-size/mivanit/zanj\" alt=\"code size, bytes\" />\n<img src=\"https://img.shields.io/pypi/dm/zanj\" alt=\"PyPI - Downloads\" /></p>\n\n<p><!-- <img src=\"https://img.shields.io/github/commit-activity/t/mivanit/zanj\" alt=\"GitHub commit activity\" />\n<img src=\"https://img.shields.io/github/issues-pr-closed/mivanit/zanj\" alt=\"GitHub closed pull requests\" /> -->\n<!-- <img src=\"https://img.shields.io/tokei/lines/github.com/mivanit/zanj\" alt=\"Lines of code\" /> --></p>\n\n<h1 id=\"zanj\">ZANJ</h1>\n\n<h1 id=\"overview\">Overview</h1>\n\n<p>The <code>ZANJ</code> format is meant to be a way of saving arbitrary objects to disk, in a way that is flexible, allows keeping configuration and data together, and is human readable. It is very loosely inspired by HDF5 and the derived <code>exdir</code> format, and the implementation is inspired by <code>npz</code> files.</p>\n\n<ul>\n<li>You can take any <code>SerializableDataclass</code> from the <a href=\"https://github.com/mivanit/muutils\">muutils</a> library and save it to disk -- any large arrays or lists will be stored efficiently as external files in the zip archive, while the basic structure and metadata will be stored in readable JSON files. </li>\n<li>You can also specify a special <code>ConfiguredModel</code>, which inherits from a <code>torch.nn.Module</code> which will let you save not just your model weights, but all required configuration information, plus any other metadata (like training logs) in a single file.</li>\n</ul>\n\n<p>This library was originally a module in <a href=\"https://github.com/mivanit/muutils/\">muutils</a></p>\n\n<h1 id=\"installation\">Installation</h1>\n\n<p>Available on PyPI as <a href=\"https://pypi.org/project/zanj/\"><code>zanj</code></a></p>\n\n<pre><code>pip install zanj\n</code></pre>\n\n<h1 id=\"usage\">Usage</h1>\n\n<p>You can find a runnable example of this in <a href=\"demo.ipynb\"><code>demo.ipynb</code></a></p>\n\n<h2 id=\"saving-a-basic-object\">Saving a basic object</h2>\n\n<p>Any <code>SerializableDataclass</code> of basic types can be saved as zanj:</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">numpy</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">np</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">pandas</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">pd</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">muutils.json_serialize</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">SerializableDataclass</span><span class=\"p\">,</span> <span class=\"n\">serializable_dataclass</span><span class=\"p\">,</span> <span class=\"n\">serializable_field</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">zanj</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">ZANJ</span>\n\n<span class=\"nd\">@serializable_dataclass</span>\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">BasicZanj</span><span class=\"p\">(</span><span class=\"n\">SerializableDataclass</span><span class=\"p\">):</span>\n    <span class=\"n\">a</span><span class=\"p\">:</span> <span class=\"nb\">str</span>\n    <span class=\"n\">q</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">42</span>\n    <span class=\"n\">c</span><span class=\"p\">:</span> <span class=\"nb\">list</span><span class=\"p\">[</span><span class=\"nb\">int</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">serializable_field</span><span class=\"p\">(</span><span class=\"n\">default_factory</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># initialize a zanj reader/writer</span>\n<span class=\"n\">zj</span> <span class=\"o\">=</span> <span class=\"n\">ZANJ</span><span class=\"p\">()</span>\n\n<span class=\"c1\"># create an instance</span>\n<span class=\"n\">instance</span><span class=\"p\">:</span> <span class=\"n\">BasicZanj</span> <span class=\"o\">=</span> <span class=\"n\">BasicZanj</span><span class=\"p\">(</span><span class=\"s2\">&quot;hello&quot;</span><span class=\"p\">,</span> <span class=\"mi\">42</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">])</span>\n<span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;tests/junk_data/path_to_save_instance.zanj&quot;</span>\n<span class=\"n\">zj</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">instance</span><span class=\"p\">,</span> <span class=\"n\">path</span><span class=\"p\">)</span>\n<span class=\"n\">recovered</span><span class=\"p\">:</span> <span class=\"n\">BasicZanj</span> <span class=\"o\">=</span> <span class=\"n\">zj</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span>\n</code></pre>\n</div>\n\n<p>ZANJ will intelligently handle nested serializable dataclasses, numpy arrays, pytorch tensors, and pandas dataframes: </p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">torch</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">pandas</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">pd</span>\n\n<span class=\"nd\">@serializable_dataclass</span>\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Complicated</span><span class=\"p\">(</span><span class=\"n\">SerializableDataclass</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span><span class=\"p\">:</span> <span class=\"nb\">str</span>\n    <span class=\"n\">arr1</span><span class=\"p\">:</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">ndarray</span>\n    <span class=\"n\">arr2</span><span class=\"p\">:</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">ndarray</span>\n    <span class=\"n\">iris_data</span><span class=\"p\">:</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">DataFrame</span>\n    <span class=\"n\">brain_data</span><span class=\"p\">:</span> <span class=\"n\">pd</span><span class=\"o\">.</span><span class=\"n\">DataFrame</span>\n    <span class=\"n\">container</span><span class=\"p\">:</span> <span class=\"nb\">list</span><span class=\"p\">[</span><span class=\"n\">BasicZanj</span><span class=\"p\">]</span>\n    <span class=\"n\">torch_tensor</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">Tensor</span>\n</code></pre>\n</div>\n\n<p>For custom classes, you can specify a <code>serialization_fn</code> and <code>loading_fn</code> to handle the logic of converting to and from a json-serializable format:</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"nd\">@serializable_dataclass</span>\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">Complicated</span><span class=\"p\">(</span><span class=\"n\">SerializableDataclass</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span><span class=\"p\">:</span> <span class=\"nb\">str</span>\n    <span class=\"n\">device</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">device</span> <span class=\"o\">=</span> <span class=\"n\">serializable_field</span><span class=\"p\">(</span>\n        <span class=\"n\">serialization_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"bp\">self</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">device</span><span class=\"p\">),</span>\n        <span class=\"n\">loading_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">device</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s2\">&quot;device&quot;</span><span class=\"p\">]),</span>\n    <span class=\"p\">)</span>\n</code></pre>\n</div>\n\n<p>Note that <code>loading_fn</code> takes the dictionary of the whole class -- this is in case you've stored data in multiple fields of the dict which are needed to reconstruct the object.</p>\n\n<h2 id=\"saving-models\">Saving Models</h2>\n\n<p>First, define a configuration class for your model. This class will hold the parameters for your model and any associated objects (like losses and optimizers). The configuration class should be a subclass of <code>SerializableDataclass</code> and use the <code>serializable_field</code> function to define fields that need special serialization.</p>\n\n<p>Here's an example that defines a GPT-like model configuration:</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">zanj.torchutil</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">ConfiguredModel</span><span class=\"p\">,</span> <span class=\"n\">set_config_class</span>\n\n<span class=\"nd\">@serializable_dataclass</span>\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">MyNNConfig</span><span class=\"p\">(</span><span class=\"n\">SerializableDataclass</span><span class=\"p\">):</span>\n    <span class=\"n\">input_dim</span><span class=\"p\">:</span> <span class=\"nb\">int</span>\n    <span class=\"n\">hidden_dim</span><span class=\"p\">:</span> <span class=\"nb\">int</span>\n    <span class=\"n\">output_dim</span><span class=\"p\">:</span> <span class=\"nb\">int</span>\n\n    <span class=\"c1\"># store the activation function by name, reconstruct it by looking it up in torch.nn</span>\n    <span class=\"n\">act_fn</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Module</span> <span class=\"o\">=</span> <span class=\"n\">serializable_field</span><span class=\"p\">(</span>\n        <span class=\"n\">serialization_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span> <span class=\"n\">x</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">,</span>\n        <span class=\"n\">loading_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span> <span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">[</span><span class=\"s2\">&quot;act_fn&quot;</span><span class=\"p\">]),</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"c1\"># same for the loss function</span>\n    <span class=\"n\">loss_kwargs</span><span class=\"p\">:</span> <span class=\"nb\">dict</span> <span class=\"o\">=</span> <span class=\"n\">serializable_field</span><span class=\"p\">(</span><span class=\"n\">default_factory</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">)</span>\n    <span class=\"n\">loss_factory</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">modules</span><span class=\"o\">.</span><span class=\"n\">loss</span><span class=\"o\">.</span><span class=\"n\">_Loss</span> <span class=\"o\">=</span> <span class=\"n\">serializable_field</span><span class=\"p\">(</span>\n        <span class=\"n\">default_factory</span><span class=\"o\">=</span><span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">CrossEntropyLoss</span><span class=\"p\">,</span>\n        <span class=\"n\">serialization_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span> <span class=\"n\">x</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"p\">,</span>\n        <span class=\"n\">loading_fn</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">x</span><span class=\"p\">:</span> <span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">[</span><span class=\"s2\">&quot;loss_factory&quot;</span><span class=\"p\">]),</span>\n    <span class=\"p\">)</span>\n    <span class=\"n\">loss</span> <span class=\"o\">=</span> <span class=\"nb\">property</span><span class=\"p\">(</span><span class=\"k\">lambda</span> <span class=\"bp\">self</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">loss_factory</span><span class=\"p\">(</span><span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">loss_kwargs</span><span class=\"p\">))</span>\n</code></pre>\n</div>\n\n<p>Then, define your model class. It should be a subclass of <code>ConfiguredModel</code>, and use the <code>set_config_class</code> decorator to associate it with your configuration class. The <code>__init__</code> method should take a single argument, which is an instance of your configuration class. You must also call the superclass <code>__init__</code> method with the configuration instance.</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"nd\">@set_config_class</span><span class=\"p\">(</span><span class=\"n\">MyNNConfig</span><span class=\"p\">)</span>\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">MyNN</span><span class=\"p\">(</span><span class=\"n\">ConfiguredModel</span><span class=\"p\">[</span><span class=\"n\">MyNNConfig</span><span class=\"p\">]):</span>\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"p\">:</span> <span class=\"n\">MyNNConfig</span><span class=\"p\">):</span>\n        <span class=\"c1\"># call the superclass init!</span>\n        <span class=\"c1\"># this will store the model in the zanj_model_config field</span>\n        <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># whatever you want here</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">net</span> <span class=\"o\">=</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Sequential</span><span class=\"p\">(</span>\n            <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Linear</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">input_dim</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">hidden_dim</span><span class=\"p\">),</span>\n            <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">act_fn</span><span class=\"p\">(),</span>\n            <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">Linear</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">hidden_dim</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">output_dim</span><span class=\"p\">),</span>\n        <span class=\"p\">)</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">forward</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">x</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">net</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">)</span>\n</code></pre>\n</div>\n\n<p>You can now create instances of your model, save them to disk, and load them back into memory:</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">MyNNConfig</span><span class=\"p\">(</span>\n    <span class=\"n\">input_dim</span><span class=\"o\">=</span><span class=\"mi\">10</span><span class=\"p\">,</span>\n    <span class=\"n\">hidden_dim</span><span class=\"o\">=</span><span class=\"mi\">20</span><span class=\"p\">,</span>\n    <span class=\"n\">output_dim</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span>\n    <span class=\"n\">act_fn</span><span class=\"o\">=</span><span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">ReLU</span><span class=\"p\">,</span>\n    <span class=\"n\">loss_kwargs</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">reduction</span><span class=\"o\">=</span><span class=\"s2\">&quot;mean&quot;</span><span class=\"p\">),</span>\n<span class=\"p\">)</span>\n\n<span class=\"c1\"># create your model from the config, and save</span>\n<span class=\"n\">model</span> <span class=\"o\">=</span> <span class=\"n\">MyNN</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"p\">)</span>\n<span class=\"n\">fname</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;tests/junk_data/path_to_save_model.zanj&quot;</span>\n<span class=\"n\">ZANJ</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">(</span><span class=\"n\">model</span><span class=\"p\">,</span> <span class=\"n\">fname</span><span class=\"p\">)</span>\n<span class=\"c1\"># load by calling the class method `read()`</span>\n<span class=\"n\">loaded_model</span> <span class=\"o\">=</span> <span class=\"n\">MyNN</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"p\">)</span>\n<span class=\"c1\"># zanj will actually infer the type of the object in the file </span>\n<span class=\"c1\"># -- and will warn you if you don&#39;t have the correct package installed</span>\n<span class=\"n\">loaded_another_way</span> <span class=\"o\">=</span> <span class=\"n\">ZANJ</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">fname</span><span class=\"p\">)</span>\n</code></pre>\n</div>\n\n<h2 id=\"configuration\">Configuration</h2>\n\n<p>When initializing a <code>ZANJ</code> object, you can specify some configuration info about saving, such as:</p>\n\n<ul>\n<li>thresholds for how big an array/table has to be before moving to external file</li>\n<li>compression settings</li>\n<li>error modes</li>\n<li>additional handlers for serialization</li>\n</ul>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"c1\"># how big an array or list (including pandas DataFrame) can be before moving it from the core JSON file</span>\n<span class=\"n\">external_array_threshold</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"n\">ZANJ_GLOBAL_DEFAULTS</span><span class=\"o\">.</span><span class=\"n\">external_array_threshold</span>\n<span class=\"n\">external_list_threshold</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"n\">ZANJ_GLOBAL_DEFAULTS</span><span class=\"o\">.</span><span class=\"n\">external_list_threshold</span>\n<span class=\"c1\"># compression settings passed to `zipfile` package</span>\n<span class=\"n\">compress</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">|</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"n\">ZANJ_GLOBAL_DEFAULTS</span><span class=\"o\">.</span><span class=\"n\">compress</span>\n<span class=\"c1\"># for doing very cursed things in your own custom loading or serialization functions</span>\n<span class=\"n\">custom_settings</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"n\">ZANJ_GLOBAL_DEFAULTS</span><span class=\"o\">.</span><span class=\"n\">custom_settings</span>\n<span class=\"c1\"># specify additional serialization handlers</span>\n<span class=\"n\">handlers_pre</span><span class=\"p\">:</span> <span class=\"n\">MonoTuple</span><span class=\"p\">[</span><span class=\"n\">SerializerHandler</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">tuple</span><span class=\"p\">()</span>\n<span class=\"n\">handlers_default</span><span class=\"p\">:</span> <span class=\"n\">MonoTuple</span><span class=\"p\">[</span><span class=\"n\">SerializerHandler</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">DEFAULT_SERIALIZER_HANDLERS_ZANJ</span><span class=\"p\">,</span>\n</code></pre>\n</div>\n\n<h1 id=\"implementation\">Implementation</h1>\n\n<p>The on-disk format is a file <code>&lt;filename&gt;.zanj</code> is a zip file containing:</p>\n\n<ul>\n<li><code>__zanj_meta__.json</code>: a file containing zanj-specific metadata including:\n<ul>\n<li>system information</li>\n<li>installed packages</li>\n<li>information about external files</li>\n</ul></li>\n<li><code>__zanj__.json</code>: a file containing user-specified data\n<ul>\n<li>when an element is too big, it can be moved to an external file\n<ul>\n<li><code>.npy</code> for numpy arrays or torch tensors</li>\n<li><code>.jsonl</code> for pandas dataframes or large sequences</li>\n</ul></li>\n<li>list of external files stored in <code>__zanj_meta__.json</code></li>\n<li>\"$ref\" key, specified in <code>_REF_KEY</code> in muutils, will have value pointing to external file</li>\n<li><code>_FORMAT_KEY</code> key will detail an external format type</li>\n</ul></li>\n</ul>\n\n<h1 id=\"comparison-to-other-formats\">Comparison to other formats</h1>\n\n<table>\n<thead>\n<tr>\n  <th>Format</th>\n  <th>Safe</th>\n  <th>Zero-copy</th>\n  <th>Lazy loading</th>\n  <th>No file size limit</th>\n  <th>Layout control</th>\n  <th>Flexibility</th>\n  <th>Bfloat16</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n  <td>pickle (PyTorch)</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n</tr>\n<tr>\n  <td>H5 (Tensorflow)</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>~</td>\n  <td>~</td>\n  <td>\u274c</td>\n</tr>\n<tr>\n  <td>HDF5</td>\n  <td>\u2705</td>\n  <td>?</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>~</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n</tr>\n<tr>\n  <td>SavedModel (Tensorflow)</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n</tr>\n<tr>\n  <td>MsgPack (flax)</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n</tr>\n<tr>\n  <td>Protobuf (ONNX)</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n</tr>\n<tr>\n  <td>Cap'n'Proto</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>~</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>~</td>\n  <td>\u274c</td>\n</tr>\n<tr>\n  <td>Numpy (npy,npz)</td>\n  <td>\u2705</td>\n  <td>?</td>\n  <td>?</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u274c</td>\n</tr>\n<tr>\n  <td>SafeTensors</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u2705</td>\n</tr>\n<tr>\n  <td>exdir</td>\n  <td>\u2705</td>\n  <td>?</td>\n  <td>?</td>\n  <td>?</td>\n  <td>?</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n</tr>\n<tr>\n  <td>ZANJ</td>\n  <td>\u2705</td>\n  <td>\u274c</td>\n  <td>\u274c*</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u2705</td>\n  <td>\u274c*</td>\n</tr>\n</tbody>\n</table>\n\n<ul>\n<li>Safe: Can I use a file randomly downloaded and expect not to run arbitrary code ?</li>\n<li>Zero-copy: Does reading the file require more memory than the original file ?</li>\n<li>Lazy loading: Can I inspect the file without loading everything ? And loading only some tensors in it without scanning the whole file (distributed setting) ?</li>\n<li>Layout control: Lazy loading, is not necessarily enough since if the information about tensors is spread out in your file, then even if the information is lazily accessible you might have to access most of your file to read the available tensors (incurring many DISK -> RAM copies). Controlling the layout to keep fast access to single tensors is important.</li>\n<li>No file size limit: Is there a limit to the file size ?</li>\n<li>Flexibility: Can I save custom code in the format and be able to use it later with zero extra code ? (~ means we can store more than pure tensors, but no custom code)</li>\n<li>Bfloat16: Does the format support native bfloat16 (meaning no weird workarounds are necessary)? This is becoming increasingly important in the ML world.</li>\n</ul>\n\n<p><code>*</code> denotes this feature may be coming at a future date :)</p>\n\n<p>(This table was stolen from <a href=\"https://github.com/huggingface/safetensors/blob/main/README.md\">safetensors</a>)</p>\n"}, {"fullname": "zanj.register_loader_handler", "modulename": "zanj", "qualname": "register_loader_handler", "kind": "function", "doc": "<p>register a custom loader handler</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">handler</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">loading</span><span class=\"o\">.</span><span class=\"n\">LoaderHandler</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "zanj.ZANJ", "modulename": "zanj", "qualname": "ZANJ", "kind": "class", "doc": "<p>Zip up: Arrays in Numpy, JSON for everything else</p>\n\n<p>given an arbitrary object, throw into a zip file, with arrays stored in .npy files, and everything else stored in a json file</p>\n\n<p>(basically npz file with json)</p>\n\n<ul>\n<li>numpy (or pytorch) arrays are stored in paths according to their name and structure in the object</li>\n<li>everything else about the object is stored in a json file <code>zanj.json</code> in the root of the archive, via <code>muutils.json_serialize.JsonSerializer</code></li>\n<li>metadata about ZANJ configuration, and optionally packages and versions, is stored in a <code>__zanj_meta__.json</code> file in the root of the archive</li>\n</ul>\n\n<p>create a ZANJ-class via <code>z_cls = ZANJ().create(obj)</code>, and save/read instances of the object via <code>z_cls.save(obj, path)</code>, <code>z_cls.load(path)</code>. be sure to pass an <strong>instance</strong> of the object, to make sure that the attributes of the class can be correctly recognized</p>\n", "bases": "muutils.json_serialize.json_serialize.JsonSerializer"}, {"fullname": "zanj.ZANJ.__init__", "modulename": "zanj", "qualname": "ZANJ.__init__", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">error_mode</span><span class=\"p\">:</span> <span class=\"n\">muutils</span><span class=\"o\">.</span><span class=\"n\">errormode</span><span class=\"o\">.</span><span class=\"n\">ErrorMode</span> <span class=\"o\">=</span> <span class=\"n\">ErrorMode</span><span class=\"o\">.</span><span class=\"n\">Except</span>,</span><span class=\"param\">\t<span class=\"n\">internal_array_mode</span><span class=\"p\">:</span> <span class=\"n\">Literal</span><span class=\"p\">[</span><span class=\"s1\">&#39;list&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;array_list_meta&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;array_hex_meta&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;array_b64_meta&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;external&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;zero_dim&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;array_list_meta&#39;</span>,</span><span class=\"param\">\t<span class=\"n\">external_array_threshold</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">256</span>,</span><span class=\"param\">\t<span class=\"n\">external_list_threshold</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">256</span>,</span><span class=\"param\">\t<span class=\"n\">compress</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">|</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>,</span><span class=\"param\">\t<span class=\"n\">custom_settings</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">handlers_pre</span><span class=\"p\">:</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"p\">()</span>,</span><span class=\"param\">\t<span class=\"n\">handlers_default</span><span class=\"p\">:</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;numpy.ndarray:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external numpy array&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;torch.Tensor:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external torch tensor&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;list:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external list&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;tuple:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external tuple&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;pandas.DataFrame:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external pandas DataFrame&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;base types&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;base types (bool, int, float, str, None)&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;dictionaries&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;dictionaries&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;(list, tuple) -&gt; list&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;lists and tuples as lists&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"n\">_serialize_override_serialize_func</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;.serialize override&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;objects with .serialize method&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;namedtuple -&gt; dict&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;namedtuples as dicts&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;dataclass -&gt; dict&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;dataclasses as dicts&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;path -&gt; str&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;Path objects as posix strings&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;obj -&gt; str(obj)&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;directly serialize objects in `SERIALIZE_DIRECT_AS_STR` to strings&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;numpy.ndarray&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;numpy arrays&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;torch.Tensor&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;pytorch tensors&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;pandas.DataFrame&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;pandas DataFrames&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;(set, list, tuple, Iterable) -&gt; list&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;sets, lists, tuples, and Iterables as lists&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;fallback&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;fallback handler -- serialize object attributes and special functions as strings&#39;</span><span class=\"p\">))</span></span>)</span>"}, {"fullname": "zanj.ZANJ.external_array_threshold", "modulename": "zanj", "qualname": "ZANJ.external_array_threshold", "kind": "variable", "doc": "<p></p>\n", "annotation": ": int"}, {"fullname": "zanj.ZANJ.external_list_threshold", "modulename": "zanj", "qualname": "ZANJ.external_list_threshold", "kind": "variable", "doc": "<p></p>\n", "annotation": ": int"}, {"fullname": "zanj.ZANJ.custom_settings", "modulename": "zanj", "qualname": "ZANJ.custom_settings", "kind": "variable", "doc": "<p></p>\n", "annotation": ": dict"}, {"fullname": "zanj.ZANJ.compress", "modulename": "zanj", "qualname": "ZANJ.compress", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "zanj.ZANJ.externals_info", "modulename": "zanj", "qualname": "ZANJ.externals_info", "kind": "function", "doc": "<p>return information about the current externals</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">str</span> <span class=\"o\">|</span> <span class=\"nb\">int</span> <span class=\"o\">|</span> <span class=\"nb\">list</span><span class=\"p\">[</span><span class=\"nb\">int</span><span class=\"p\">]]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.ZANJ.meta", "modulename": "zanj", "qualname": "ZANJ.meta", "kind": "function", "doc": "<p>return the metadata of the ZANJ archive</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">self</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.ZANJ.save", "modulename": "zanj", "qualname": "ZANJ.save", "kind": "function", "doc": "<p>save the object to a ZANJ archive. returns the path to the archive</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">obj</span><span class=\"p\">:</span> <span class=\"n\">Any</span>, </span><span class=\"param\"><span class=\"n\">file_path</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">|</span> <span class=\"n\">pathlib</span><span class=\"o\">.</span><span class=\"n\">_local</span><span class=\"o\">.</span><span class=\"n\">Path</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">str</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.ZANJ.read", "modulename": "zanj", "qualname": "ZANJ.read", "kind": "function", "doc": "<p>load the object from a ZANJ archive</p>\n\n<h1 id=\"todo-load-only-some-part-of-the-zanj-file-by-passing-an-objectpath\">TODO: load only some part of the zanj file by passing an ObjectPath</h1>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">file_path</span><span class=\"p\">:</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">pathlib</span><span class=\"o\">.</span><span class=\"n\">_local</span><span class=\"o\">.</span><span class=\"n\">Path</span><span class=\"p\">]</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Any</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.externals", "modulename": "zanj.externals", "kind": "module", "doc": "<p>for storing/retrieving an item externally in a ZANJ archive</p>\n"}, {"fullname": "zanj.externals.ZANJ_MAIN", "modulename": "zanj.externals", "qualname": "ZANJ_MAIN", "kind": "variable", "doc": "<p></p>\n", "annotation": ": str", "default_value": "&#x27;__zanj__.json&#x27;"}, {"fullname": "zanj.externals.ZANJ_META", "modulename": "zanj.externals", "qualname": "ZANJ_META", "kind": "variable", "doc": "<p></p>\n", "annotation": ": str", "default_value": "&#x27;__zanj_meta__.json&#x27;"}, {"fullname": "zanj.externals.ExternalItemType", "modulename": "zanj.externals", "qualname": "ExternalItemType", "kind": "variable", "doc": "<p></p>\n", "default_value": "typing.Literal[&#x27;jsonl&#x27;, &#x27;npy&#x27;]"}, {"fullname": "zanj.externals.ExternalItemType_vals", "modulename": "zanj.externals", "qualname": "ExternalItemType_vals", "kind": "variable", "doc": "<p></p>\n", "default_value": "(&#x27;jsonl&#x27;, &#x27;npy&#x27;)"}, {"fullname": "zanj.externals.ExternalItem", "modulename": "zanj.externals", "qualname": "ExternalItem", "kind": "class", "doc": "<p>ExternalItem(item_type, data, path)</p>\n", "bases": "typing.NamedTuple"}, {"fullname": "zanj.externals.ExternalItem.__init__", "modulename": "zanj.externals", "qualname": "ExternalItem.__init__", "kind": "function", "doc": "<p>Create new instance of ExternalItem(item_type, data, path)</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">item_type</span><span class=\"p\">:</span> <span class=\"n\">Literal</span><span class=\"p\">[</span><span class=\"s1\">&#39;jsonl&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;npy&#39;</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"n\">Any</span>,</span><span class=\"param\">\t<span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]</span></span>)</span>"}, {"fullname": "zanj.externals.ExternalItem.item_type", "modulename": "zanj.externals", "qualname": "ExternalItem.item_type", "kind": "variable", "doc": "<p>Alias for field number 0</p>\n", "annotation": ": Literal[&#x27;jsonl&#x27;, &#x27;npy&#x27;]"}, {"fullname": "zanj.externals.ExternalItem.data", "modulename": "zanj.externals", "qualname": "ExternalItem.data", "kind": "variable", "doc": "<p>Alias for field number 1</p>\n", "annotation": ": Any"}, {"fullname": "zanj.externals.ExternalItem.path", "modulename": "zanj.externals", "qualname": "ExternalItem.path", "kind": "variable", "doc": "<p>Alias for field number 2</p>\n", "annotation": ": tuple[typing.Union[str, int], ...]"}, {"fullname": "zanj.externals.load_jsonl", "modulename": "zanj.externals", "qualname": "load_jsonl", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&#39;LoadedZANJ&#39;&quot;</span>,</span><span class=\"param\">\t<span class=\"n\">fp</span><span class=\"p\">:</span> <span class=\"n\">IO</span><span class=\"p\">[</span><span class=\"nb\">bytes</span><span class=\"p\">]</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">list</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]]]]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.externals.load_npy", "modulename": "zanj.externals", "qualname": "load_npy", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&#39;LoadedZANJ&#39;&quot;</span>, </span><span class=\"param\"><span class=\"n\">fp</span><span class=\"p\">:</span> <span class=\"n\">IO</span><span class=\"p\">[</span><span class=\"nb\">bytes</span><span class=\"p\">]</span></span><span class=\"return-annotation\">) -> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">ndarray</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.externals.EXTERNAL_LOAD_FUNCS", "modulename": "zanj.externals", "qualname": "EXTERNAL_LOAD_FUNCS", "kind": "variable", "doc": "<p></p>\n", "annotation": ": dict[typing.Literal[&#x27;jsonl&#x27;, &#x27;npy&#x27;], typing.Callable[[zanj.zanj.ZANJ, typing.IO[bytes]], typing.Any]]", "default_value": "{&#x27;jsonl&#x27;: &lt;function load_jsonl&gt;, &#x27;npy&#x27;: &lt;function load_npy&gt;}"}, {"fullname": "zanj.externals.GET_EXTERNAL_LOAD_FUNC", "modulename": "zanj.externals", "qualname": "GET_EXTERNAL_LOAD_FUNC", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">item_type</span><span class=\"p\">:</span> <span class=\"nb\">str</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">ZANJ</span><span class=\"p\">,</span> <span class=\"n\">IO</span><span class=\"p\">[</span><span class=\"nb\">bytes</span><span class=\"p\">]],</span> <span class=\"n\">Any</span><span class=\"p\">]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.loading", "modulename": "zanj.loading", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "zanj.loading.LoaderHandler", "modulename": "zanj.loading", "qualname": "LoaderHandler", "kind": "class", "doc": "<p>handler for loading an object from a json file or a ZANJ archive</p>\n"}, {"fullname": "zanj.loading.LoaderHandler.__init__", "modulename": "zanj.loading", "qualname": "LoaderHandler.__init__", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">check</span><span class=\"p\">:</span> <span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]],</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">],</span> <span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"nb\">bool</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">load</span><span class=\"p\">:</span> <span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]],</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">],</span> <span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Any</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">uid</span><span class=\"p\">:</span> <span class=\"nb\">str</span>,</span><span class=\"param\">\t<span class=\"n\">source_pckg</span><span class=\"p\">:</span> <span class=\"nb\">str</span>,</span><span class=\"param\">\t<span class=\"n\">priority</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>,</span><span class=\"param\">\t<span class=\"n\">desc</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;(no description)&#39;</span></span>)</span>"}, {"fullname": "zanj.loading.LoaderHandler.check", "modulename": "zanj.loading", "qualname": "LoaderHandler.check", "kind": "variable", "doc": "<p></p>\n", "annotation": ": Callable[[Union[bool, int, float, str, NoneType, List[Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]], Dict[str, Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]]], tuple[Union[str, int], ...], Any], bool]"}, {"fullname": "zanj.loading.LoaderHandler.load", "modulename": "zanj.loading", "qualname": "LoaderHandler.load", "kind": "variable", "doc": "<p></p>\n", "annotation": ": Callable[[Union[bool, int, float, str, NoneType, List[Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]], Dict[str, Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]]], tuple[Union[str, int], ...], Any], Any]"}, {"fullname": "zanj.loading.LoaderHandler.uid", "modulename": "zanj.loading", "qualname": "LoaderHandler.uid", "kind": "variable", "doc": "<p></p>\n", "annotation": ": str"}, {"fullname": "zanj.loading.LoaderHandler.source_pckg", "modulename": "zanj.loading", "qualname": "LoaderHandler.source_pckg", "kind": "variable", "doc": "<p></p>\n", "annotation": ": str"}, {"fullname": "zanj.loading.LoaderHandler.priority", "modulename": "zanj.loading", "qualname": "LoaderHandler.priority", "kind": "variable", "doc": "<p></p>\n", "annotation": ": int", "default_value": "0"}, {"fullname": "zanj.loading.LoaderHandler.desc", "modulename": "zanj.loading", "qualname": "LoaderHandler.desc", "kind": "variable", "doc": "<p></p>\n", "annotation": ": str", "default_value": "&#x27;(no description)&#x27;"}, {"fullname": "zanj.loading.LoaderHandler.serialize", "modulename": "zanj.loading", "qualname": "LoaderHandler.serialize", "kind": "function", "doc": "<p>serialize the handler info</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">self</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.loading.LoaderHandler.from_formattedclass", "modulename": "zanj.loading", "qualname": "LoaderHandler.from_formattedclass", "kind": "function", "doc": "<p>create a loader from a class with <code>serialize</code>, <code>load</code> methods and <code>__muutils_format__</code> attribute</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">cls</span>, </span><span class=\"param\"><span class=\"n\">fc</span><span class=\"p\">:</span> <span class=\"nb\">type</span>, </span><span class=\"param\"><span class=\"n\">priority</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">0</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "zanj.loading.LOADER_MAP_LOCK", "modulename": "zanj.loading", "qualname": "LOADER_MAP_LOCK", "kind": "variable", "doc": "<p></p>\n", "default_value": "&lt;unlocked _thread.lock object&gt;"}, {"fullname": "zanj.loading.LOADER_MAP", "modulename": "zanj.loading", "qualname": "LOADER_MAP", "kind": "variable", "doc": "<p></p>\n", "annotation": ": dict[str, zanj.loading.LoaderHandler]", "default_value": "{&#x27;numpy.ndarray&#x27;: LoaderHandler(check=&lt;function &lt;lambda&gt;&gt;, load=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;numpy.ndarray&#x27;, source_pckg=&#x27;zanj&#x27;, priority=0, desc=&#x27;numpy.ndarray loader&#x27;), &#x27;torch.Tensor&#x27;: LoaderHandler(check=&lt;function &lt;lambda&gt;&gt;, load=&lt;function _torch_loaderhandler_load&gt;, uid=&#x27;torch.Tensor&#x27;, source_pckg=&#x27;zanj&#x27;, priority=0, desc=&#x27;torch.Tensor loader&#x27;), &#x27;pandas.DataFrame&#x27;: LoaderHandler(check=&lt;function &lt;lambda&gt;&gt;, load=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;pandas.DataFrame&#x27;, source_pckg=&#x27;zanj&#x27;, priority=0, desc=&#x27;pandas.DataFrame loader&#x27;), &#x27;list&#x27;: LoaderHandler(check=&lt;function &lt;lambda&gt;&gt;, load=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;list&#x27;, source_pckg=&#x27;zanj&#x27;, priority=0, desc=&#x27;list loader, for externals&#x27;), &#x27;tuple&#x27;: LoaderHandler(check=&lt;function &lt;lambda&gt;&gt;, load=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;tuple&#x27;, source_pckg=&#x27;zanj&#x27;, priority=0, desc=&#x27;tuple loader, for externals&#x27;)}"}, {"fullname": "zanj.loading.register_loader_handler", "modulename": "zanj.loading", "qualname": "register_loader_handler", "kind": "function", "doc": "<p>register a custom loader handler</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">handler</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">loading</span><span class=\"o\">.</span><span class=\"n\">LoaderHandler</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "zanj.loading.get_item_loader", "modulename": "zanj.loading", "qualname": "get_item_loader", "kind": "function", "doc": "<p>get the loader for a json item</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">json_item</span><span class=\"p\">:</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]</span>,</span><span class=\"param\">\t<span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">error_mode</span><span class=\"p\">:</span> <span class=\"n\">muutils</span><span class=\"o\">.</span><span class=\"n\">errormode</span><span class=\"o\">.</span><span class=\"n\">ErrorMode</span> <span class=\"o\">=</span> <span class=\"n\">ErrorMode</span><span class=\"o\">.</span><span class=\"n\">Warn</span></span><span class=\"return-annotation\">) -> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">loading</span><span class=\"o\">.</span><span class=\"n\">LoaderHandler</span> <span class=\"o\">|</span> <span class=\"kc\">None</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.loading.load_item_recursive", "modulename": "zanj.loading", "qualname": "load_item_recursive", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">json_item</span><span class=\"p\">:</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]</span>,</span><span class=\"param\">\t<span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">error_mode</span><span class=\"p\">:</span> <span class=\"n\">muutils</span><span class=\"o\">.</span><span class=\"n\">errormode</span><span class=\"o\">.</span><span class=\"n\">ErrorMode</span> <span class=\"o\">=</span> <span class=\"n\">ErrorMode</span><span class=\"o\">.</span><span class=\"n\">Warn</span>,</span><span class=\"param\">\t<span class=\"n\">allow_not_loading</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">=</span> <span class=\"kc\">True</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Any</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.loading.LoadedZANJ", "modulename": "zanj.loading", "qualname": "LoadedZANJ", "kind": "class", "doc": "<p>for loading a zanj file</p>\n"}, {"fullname": "zanj.loading.LoadedZANJ.__init__", "modulename": "zanj.loading", "qualname": "LoadedZANJ.__init__", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">|</span> <span class=\"n\">pathlib</span><span class=\"o\">.</span><span class=\"n\">_local</span><span class=\"o\">.</span><span class=\"n\">Path</span>, </span><span class=\"param\"><span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">Any</span></span>)</span>"}, {"fullname": "zanj.loading.LoadedZANJ.populate_externals", "modulename": "zanj.loading", "qualname": "LoadedZANJ.populate_externals", "kind": "function", "doc": "<p>put all external items into the main json data</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">) -> <span class=\"kc\">None</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.serializing", "modulename": "zanj.serializing", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "zanj.serializing.KW_ONLY_KWARGS", "modulename": "zanj.serializing", "qualname": "KW_ONLY_KWARGS", "kind": "variable", "doc": "<p></p>\n", "annotation": ": dict", "default_value": "{&#x27;kw_only&#x27;: True}"}, {"fullname": "zanj.serializing.jsonl_metadata", "modulename": "zanj.serializing", "qualname": "jsonl_metadata", "kind": "function", "doc": "<p>metadata about a jsonl object</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"nb\">list</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]]]]]]</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">dict</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.serializing.store_npy", "modulename": "zanj.serializing", "qualname": "store_npy", "kind": "function", "doc": "<p>store numpy array to given file as .npy</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span><span class=\"p\">:</span> <span class=\"n\">Any</span>, </span><span class=\"param\"><span class=\"n\">fp</span><span class=\"p\">:</span> <span class=\"n\">IO</span><span class=\"p\">[</span><span class=\"nb\">bytes</span><span class=\"p\">]</span>, </span><span class=\"param\"><span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"n\">numpy</span><span class=\"o\">.</span><span class=\"n\">ndarray</span></span><span class=\"return-annotation\">) -> <span class=\"kc\">None</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.serializing.store_jsonl", "modulename": "zanj.serializing", "qualname": "store_jsonl", "kind": "function", "doc": "<p>store sequence to given file as .jsonl</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">self</span><span class=\"p\">:</span> <span class=\"n\">Any</span>,</span><span class=\"param\">\t<span class=\"n\">fp</span><span class=\"p\">:</span> <span class=\"n\">IO</span><span class=\"p\">[</span><span class=\"nb\">bytes</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"n\">Sequence</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]]</span></span><span class=\"return-annotation\">) -> <span class=\"kc\">None</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.serializing.EXTERNAL_STORE_FUNCS", "modulename": "zanj.serializing", "qualname": "EXTERNAL_STORE_FUNCS", "kind": "variable", "doc": "<p></p>\n", "annotation": ": dict[typing.Literal[&#x27;jsonl&#x27;, &#x27;npy&#x27;], typing.Callable[[typing.Any, typing.IO[bytes], typing.Any], NoneType]]", "default_value": "{&#x27;npy&#x27;: &lt;function store_npy&gt;, &#x27;jsonl&#x27;: &lt;function store_jsonl&gt;}"}, {"fullname": "zanj.serializing.ZANJSerializerHandler", "modulename": "zanj.serializing", "qualname": "ZANJSerializerHandler", "kind": "class", "doc": "<p>a handler for ZANJ serialization</p>\n", "bases": "muutils.json_serialize.json_serialize.SerializerHandler"}, {"fullname": "zanj.serializing.ZANJSerializerHandler.__init__", "modulename": "zanj.serializing", "qualname": "ZANJSerializerHandler.__init__", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">uid</span><span class=\"p\">:</span> <span class=\"nb\">str</span>,</span><span class=\"param\">\t<span class=\"n\">desc</span><span class=\"p\">:</span> <span class=\"nb\">str</span>,</span><span class=\"param\">\t<span class=\"o\">*</span>,</span><span class=\"param\">\t<span class=\"n\">check</span><span class=\"p\">:</span> <span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"n\">Any</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">,</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]],</span> <span class=\"nb\">bool</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">serialize_func</span><span class=\"p\">:</span> <span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"n\">Any</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">,</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]],</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]]</span>,</span><span class=\"param\">\t<span class=\"n\">source_pckg</span><span class=\"p\">:</span> <span class=\"nb\">str</span></span>)</span>"}, {"fullname": "zanj.serializing.ZANJSerializerHandler.source_pckg", "modulename": "zanj.serializing", "qualname": "ZANJSerializerHandler.source_pckg", "kind": "variable", "doc": "<p></p>\n", "annotation": ": str"}, {"fullname": "zanj.serializing.ZANJSerializerHandler.check", "modulename": "zanj.serializing", "qualname": "ZANJSerializerHandler.check", "kind": "variable", "doc": "<p></p>\n", "annotation": ": Callable[[Any, Any, tuple[Union[str, int], ...]], bool]"}, {"fullname": "zanj.serializing.ZANJSerializerHandler.serialize_func", "modulename": "zanj.serializing", "qualname": "ZANJSerializerHandler.serialize_func", "kind": "variable", "doc": "<p></p>\n", "annotation": ": Callable[[Any, Any, tuple[Union[str, int], ...]], Union[bool, int, float, str, NoneType, List[Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]], Dict[str, Union[bool, int, float, str, NoneType, List[Any], Dict[str, Any]]]]]"}, {"fullname": "zanj.serializing.zanj_external_serialize", "modulename": "zanj.serializing", "qualname": "zanj_external_serialize", "kind": "function", "doc": "<p>stores a numpy array or jsonl externally in a ZANJ object</p>\n\n<h1 id=\"parameters\">Parameters:</h1>\n\n<ul>\n<li><code>jser: ZANJ</code></li>\n<li><code>data: Any</code></li>\n<li><code>path: ObjectPath</code></li>\n<li><code>item_type: ExternalItemType</code></li>\n</ul>\n\n<h1 id=\"returns\">Returns:</h1>\n\n<ul>\n<li><code>JSONitem</code>\njson data with reference</li>\n</ul>\n\n<h1 id=\"modifies\">Modifies:</h1>\n\n<ul>\n<li>modifies <code>jser._externals</code></li>\n</ul>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">jser</span><span class=\"p\">:</span> <span class=\"n\">Any</span>,</span><span class=\"param\">\t<span class=\"n\">data</span><span class=\"p\">:</span> <span class=\"n\">Any</span>,</span><span class=\"param\">\t<span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">item_type</span><span class=\"p\">:</span> <span class=\"n\">Literal</span><span class=\"p\">[</span><span class=\"s1\">&#39;jsonl&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;npy&#39;</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">_format</span><span class=\"p\">:</span> <span class=\"nb\">str</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.serializing.DEFAULT_SERIALIZER_HANDLERS_ZANJ", "modulename": "zanj.serializing", "qualname": "DEFAULT_SERIALIZER_HANDLERS_ZANJ", "kind": "variable", "doc": "<p></p>\n", "annotation": ": None", "default_value": "(ZANJSerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;numpy.ndarray:external&#x27;, desc=&#x27;external numpy array&#x27;, source_pckg=&#x27;zanj&#x27;), ZANJSerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;torch.Tensor:external&#x27;, desc=&#x27;external torch tensor&#x27;, source_pckg=&#x27;zanj&#x27;), ZANJSerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;list:external&#x27;, desc=&#x27;external list&#x27;, source_pckg=&#x27;zanj&#x27;), ZANJSerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;tuple:external&#x27;, desc=&#x27;external tuple&#x27;, source_pckg=&#x27;zanj&#x27;), ZANJSerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;pandas.DataFrame:external&#x27;, desc=&#x27;external pandas DataFrame&#x27;, source_pckg=&#x27;zanj&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;base types&#x27;, desc=&#x27;base types (bool, int, float, str, None)&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;dictionaries&#x27;, desc=&#x27;dictionaries&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;(list, tuple) -&gt; list&#x27;, desc=&#x27;lists and tuples as lists&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function _serialize_override_serialize_func&gt;, uid=&#x27;.serialize override&#x27;, desc=&#x27;objects with .serialize method&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;namedtuple -&gt; dict&#x27;, desc=&#x27;namedtuples as dicts&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;dataclass -&gt; dict&#x27;, desc=&#x27;dataclasses as dicts&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;path -&gt; str&#x27;, desc=&#x27;Path objects as posix strings&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;obj -&gt; str(obj)&#x27;, desc=&#x27;directly serialize objects in `SERIALIZE_DIRECT_AS_STR` to strings&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;numpy.ndarray&#x27;, desc=&#x27;numpy arrays&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;torch.Tensor&#x27;, desc=&#x27;pytorch tensors&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;pandas.DataFrame&#x27;, desc=&#x27;pandas DataFrames&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;(set, list, tuple, Iterable) -&gt; list&#x27;, desc=&#x27;sets, lists, tuples, and Iterables as lists&#x27;), SerializerHandler(check=&lt;function &lt;lambda&gt;&gt;, serialize_func=&lt;function &lt;lambda&gt;&gt;, uid=&#x27;fallback&#x27;, desc=&#x27;fallback handler -- serialize object attributes and special functions as strings&#x27;))"}, {"fullname": "zanj.torchutil", "modulename": "zanj.torchutil", "kind": "module", "doc": "<p>torch utilities for zanj -- in particular the <code>ConfiguredModel</code> base class</p>\n\n<p>note that this requires torch</p>\n"}, {"fullname": "zanj.torchutil.KWArgs", "modulename": "zanj.torchutil", "qualname": "KWArgs", "kind": "variable", "doc": "<p></p>\n", "default_value": "typing.Any"}, {"fullname": "zanj.torchutil.num_params", "modulename": "zanj.torchutil", "qualname": "num_params", "kind": "function", "doc": "<p>return total number of parameters in a model</p>\n\n<ul>\n<li>only counting shared parameters once</li>\n<li>if <code>only_trainable</code> is False, will include parameters with <code>requires_grad = False</code></li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/questions/49201236/check-the-total-number-of-parameters-in-a-pytorch-model\">https://stackoverflow.com/questions/49201236/check-the-total-number-of-parameters-in-a-pytorch-model</a></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">m</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">modules</span><span class=\"o\">.</span><span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">Module</span>, </span><span class=\"param\"><span class=\"n\">only_trainable</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">=</span> <span class=\"kc\">True</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.get_module_device", "modulename": "zanj.torchutil", "qualname": "get_module_device", "kind": "function", "doc": "<p>get the current devices</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">m</span><span class=\"p\">:</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">nn</span><span class=\"o\">.</span><span class=\"n\">modules</span><span class=\"o\">.</span><span class=\"n\">module</span><span class=\"o\">.</span><span class=\"n\">Module</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">device</span> <span class=\"o\">|</span> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">torch</span><span class=\"o\">.</span><span class=\"n\">device</span><span class=\"p\">]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfiguredModel", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel", "kind": "class", "doc": "<p>a model that has a configuration, for saving with ZANJ</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"nd\">@set_config_class</span><span class=\"p\">(</span><span class=\"n\">YourConfig</span><span class=\"p\">)</span>\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">YourModule</span><span class=\"p\">(</span><span class=\"n\">ConfiguredModel</span><span class=\"p\">[</span><span class=\"n\">YourConfig</span><span class=\"p\">]):</span>\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">cfg</span><span class=\"p\">:</span> <span class=\"n\">YourConfig</span><span class=\"p\">):</span>\n        <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"n\">cfg</span><span class=\"p\">)</span>\n</code></pre>\n</div>\n\n<p><code>__init__()</code> must initialize the model from a config object only, and call\n<code>super().__init__(zanj_model_config)</code></p>\n\n<p>If you are inheriting from another class + ConfiguredModel,\nConfiguredModel must be the first class in the inheritance list</p>\n", "bases": "torch.nn.modules.module.Module, typing.Generic[~T_config]"}, {"fullname": "zanj.torchutil.ConfiguredModel.zanj_config_class", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.zanj_config_class", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "zanj.torchutil.ConfiguredModel.zanj_model_config", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.zanj_model_config", "kind": "variable", "doc": "<p></p>\n", "annotation": ": ~T_config"}, {"fullname": "zanj.torchutil.ConfiguredModel.training_records", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.training_records", "kind": "variable", "doc": "<p></p>\n", "annotation": ": dict | None"}, {"fullname": "zanj.torchutil.ConfiguredModel.serialize", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.serialize", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">self</span>,</span><span class=\"param\">\t<span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">()</span>,</span><span class=\"param\">\t<span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">ZANJ</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfiguredModel.save", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.save", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">file_path</span><span class=\"p\">:</span> <span class=\"nb\">str</span>, </span><span class=\"param\"><span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">ZANJ</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfiguredModel.load", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.load", "kind": "function", "doc": "<p>load a model from a serialized object</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">cls</span>,</span><span class=\"param\">\t<span class=\"n\">obj</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">path</span><span class=\"p\">:</span> <span class=\"nb\">tuple</span><span class=\"p\">[</span><span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">],</span> <span class=\"o\">...</span><span class=\"p\">]</span>,</span><span class=\"param\">\t<span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">ZANJ</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span></span><span class=\"return-annotation\">) -> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfiguredModel.read", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.read", "kind": "function", "doc": "<p>read a model from a file</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">cls</span>,</span><span class=\"param\">\t<span class=\"n\">file_path</span><span class=\"p\">:</span> <span class=\"nb\">str</span>,</span><span class=\"param\">\t<span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">ZANJ</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span></span><span class=\"return-annotation\">) -> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfiguredModel.load_file", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.load_file", "kind": "function", "doc": "<p>read a model from a file</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">cls</span>,</span><span class=\"param\">\t<span class=\"n\">file_path</span><span class=\"p\">:</span> <span class=\"nb\">str</span>,</span><span class=\"param\">\t<span class=\"n\">zanj</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">ZANJ</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span></span><span class=\"return-annotation\">) -> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfiguredModel.get_handler", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.get_handler", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">cls</span></span><span class=\"return-annotation\">) -> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">loading</span><span class=\"o\">.</span><span class=\"n\">LoaderHandler</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfiguredModel.num_params", "modulename": "zanj.torchutil", "qualname": "ConfiguredModel.num_params", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">int</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.set_config_class", "modulename": "zanj.torchutil", "qualname": "set_config_class", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">config_class</span><span class=\"p\">:</span> <span class=\"n\">Type</span><span class=\"p\">[</span><span class=\"n\">muutils</span><span class=\"o\">.</span><span class=\"n\">json_serialize</span><span class=\"o\">.</span><span class=\"n\">serializable_dataclass</span><span class=\"o\">.</span><span class=\"n\">SerializableDataclass</span><span class=\"p\">]</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Callable</span><span class=\"p\">[[</span><span class=\"n\">Type</span><span class=\"p\">[</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span><span class=\"p\">]],</span> <span class=\"n\">Type</span><span class=\"p\">[</span><span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span><span class=\"p\">]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.ConfigMismatchException", "modulename": "zanj.torchutil", "qualname": "ConfigMismatchException", "kind": "class", "doc": "<p>Inappropriate argument value (of correct type).</p>\n", "bases": "builtins.ValueError"}, {"fullname": "zanj.torchutil.ConfigMismatchException.__init__", "modulename": "zanj.torchutil", "qualname": "ConfigMismatchException.__init__", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">msg</span><span class=\"p\">:</span> <span class=\"nb\">str</span>, </span><span class=\"param\"><span class=\"n\">diff</span></span>)</span>"}, {"fullname": "zanj.torchutil.ConfigMismatchException.diff", "modulename": "zanj.torchutil", "qualname": "ConfigMismatchException.diff", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "zanj.torchutil.assert_model_cfg_equality", "modulename": "zanj.torchutil", "qualname": "assert_model_cfg_equality", "kind": "function", "doc": "<p>check both models are correct instances and have the same config</p>\n\n<p>Raises:\n    ConfigMismatchException: if the configs don't match, e.diff will contain the diff</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">model_a</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span>,</span><span class=\"param\">\t<span class=\"n\">model_b</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "zanj.torchutil.assert_model_exact_equality", "modulename": "zanj.torchutil", "qualname": "assert_model_exact_equality", "kind": "function", "doc": "<p>check the models are exactly equal, including state dict contents</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">model_a</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span>,</span><span class=\"param\">\t<span class=\"n\">model_b</span><span class=\"p\">:</span> <span class=\"n\">zanj</span><span class=\"o\">.</span><span class=\"n\">torchutil</span><span class=\"o\">.</span><span class=\"n\">ConfiguredModel</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "zanj.zanj", "modulename": "zanj.zanj", "kind": "module", "doc": "<p>an HDF5/exdir file alternative, which uses json for attributes, allows serialization of arbitrary data</p>\n\n<p>for large arrays, the output is a .tar.gz file with most data in a json file, but with sufficiently large arrays stored in binary .npy files</p>\n\n<p>\"ZANJ\" is an acronym that the AI tool <a href=\"https://elicit.org\">Elicit</a> came up with for me. not to be confused with:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Zanj\">https://en.wikipedia.org/wiki/Zanj</a></li>\n<li><a href=\"https://www.plutojournals.com/zanj/\">https://www.plutojournals.com/zanj/</a></li>\n</ul>\n"}, {"fullname": "zanj.zanj.ZANJitem", "modulename": "zanj.zanj", "qualname": "ZANJitem", "kind": "variable", "doc": "<p></p>\n", "default_value": "typing.Union[bool, int, float, str, NoneType, typing.List[typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]], typing.Dict[str, typing.Union[bool, int, float, str, NoneType, typing.List[typing.Any], typing.Dict[str, typing.Any]]], numpy.ndarray, ForwardRef(&#x27;pd.DataFrame&#x27;)]"}, {"fullname": "zanj.zanj.ZANJ_GLOBAL_DEFAULTS", "modulename": "zanj.zanj", "qualname": "ZANJ_GLOBAL_DEFAULTS", "kind": "variable", "doc": "<p></p>\n", "annotation": ": zanj.zanj._ZANJ_GLOBAL_DEFAULTS_CLASS", "default_value": "_ZANJ_GLOBAL_DEFAULTS_CLASS(error_mode=ErrorMode.Except, internal_array_mode=&#x27;array_list_meta&#x27;, external_array_threshold=256, external_list_threshold=256, compress=True, custom_settings=None)"}, {"fullname": "zanj.zanj.ZANJ", "modulename": "zanj.zanj", "qualname": "ZANJ", "kind": "class", "doc": "<p>Zip up: Arrays in Numpy, JSON for everything else</p>\n\n<p>given an arbitrary object, throw into a zip file, with arrays stored in .npy files, and everything else stored in a json file</p>\n\n<p>(basically npz file with json)</p>\n\n<ul>\n<li>numpy (or pytorch) arrays are stored in paths according to their name and structure in the object</li>\n<li>everything else about the object is stored in a json file <code>zanj.json</code> in the root of the archive, via <code>muutils.json_serialize.JsonSerializer</code></li>\n<li>metadata about ZANJ configuration, and optionally packages and versions, is stored in a <code>__zanj_meta__.json</code> file in the root of the archive</li>\n</ul>\n\n<p>create a ZANJ-class via <code>z_cls = ZANJ().create(obj)</code>, and save/read instances of the object via <code>z_cls.save(obj, path)</code>, <code>z_cls.load(path)</code>. be sure to pass an <strong>instance</strong> of the object, to make sure that the attributes of the class can be correctly recognized</p>\n", "bases": "muutils.json_serialize.json_serialize.JsonSerializer"}, {"fullname": "zanj.zanj.ZANJ.__init__", "modulename": "zanj.zanj", "qualname": "ZANJ.__init__", "kind": "function", "doc": "<p></p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">error_mode</span><span class=\"p\">:</span> <span class=\"n\">muutils</span><span class=\"o\">.</span><span class=\"n\">errormode</span><span class=\"o\">.</span><span class=\"n\">ErrorMode</span> <span class=\"o\">=</span> <span class=\"n\">ErrorMode</span><span class=\"o\">.</span><span class=\"n\">Except</span>,</span><span class=\"param\">\t<span class=\"n\">internal_array_mode</span><span class=\"p\">:</span> <span class=\"n\">Literal</span><span class=\"p\">[</span><span class=\"s1\">&#39;list&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;array_list_meta&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;array_hex_meta&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;array_b64_meta&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;external&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;zero_dim&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;array_list_meta&#39;</span>,</span><span class=\"param\">\t<span class=\"n\">external_array_threshold</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">256</span>,</span><span class=\"param\">\t<span class=\"n\">external_list_threshold</span><span class=\"p\">:</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"mi\">256</span>,</span><span class=\"param\">\t<span class=\"n\">compress</span><span class=\"p\">:</span> <span class=\"nb\">bool</span> <span class=\"o\">|</span> <span class=\"nb\">int</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>,</span><span class=\"param\">\t<span class=\"n\">custom_settings</span><span class=\"p\">:</span> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">typing</span><span class=\"o\">.</span><span class=\"n\">Any</span><span class=\"p\">]</span> <span class=\"o\">|</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">handlers_pre</span><span class=\"p\">:</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"p\">()</span>,</span><span class=\"param\">\t<span class=\"n\">handlers_default</span><span class=\"p\">:</span> <span class=\"kc\">None</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;numpy.ndarray:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external numpy array&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;torch.Tensor:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external torch tensor&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;list:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external list&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;tuple:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external tuple&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">ZANJSerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;pandas.DataFrame:external&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;external pandas DataFrame&#39;</span><span class=\"p\">,</span> <span class=\"n\">source_pckg</span><span class=\"o\">=</span><span class=\"s1\">&#39;zanj&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;base types&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;base types (bool, int, float, str, None)&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;dictionaries&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;dictionaries&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;(list, tuple) -&gt; list&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;lists and tuples as lists&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"n\">_serialize_override_serialize_func</span><span class=\"o\">&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;.serialize override&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;objects with .serialize method&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;namedtuple -&gt; dict&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;namedtuples as dicts&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;dataclass -&gt; dict&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;dataclasses as dicts&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;path -&gt; str&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;Path objects as posix strings&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;obj -&gt; str(obj)&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;directly serialize objects in `SERIALIZE_DIRECT_AS_STR` to strings&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;numpy.ndarray&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;numpy arrays&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;torch.Tensor&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;pytorch tensors&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;pandas.DataFrame&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;pandas DataFrames&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;(set, list, tuple, Iterable) -&gt; list&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;sets, lists, tuples, and Iterables as lists&#39;</span><span class=\"p\">),</span> <span class=\"n\">SerializerHandler</span><span class=\"p\">(</span><span class=\"n\">check</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">serialize_func</span><span class=\"o\">=&lt;</span><span class=\"n\">function</span> <span class=\"o\">&lt;</span><span class=\"k\">lambda</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span> <span class=\"n\">uid</span><span class=\"o\">=</span><span class=\"s1\">&#39;fallback&#39;</span><span class=\"p\">,</span> <span class=\"n\">desc</span><span class=\"o\">=</span><span class=\"s1\">&#39;fallback handler -- serialize object attributes and special functions as strings&#39;</span><span class=\"p\">))</span></span>)</span>"}, {"fullname": "zanj.zanj.ZANJ.external_array_threshold", "modulename": "zanj.zanj", "qualname": "ZANJ.external_array_threshold", "kind": "variable", "doc": "<p></p>\n", "annotation": ": int"}, {"fullname": "zanj.zanj.ZANJ.external_list_threshold", "modulename": "zanj.zanj", "qualname": "ZANJ.external_list_threshold", "kind": "variable", "doc": "<p></p>\n", "annotation": ": int"}, {"fullname": "zanj.zanj.ZANJ.custom_settings", "modulename": "zanj.zanj", "qualname": "ZANJ.custom_settings", "kind": "variable", "doc": "<p></p>\n", "annotation": ": dict"}, {"fullname": "zanj.zanj.ZANJ.compress", "modulename": "zanj.zanj", "qualname": "ZANJ.compress", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "zanj.zanj.ZANJ.externals_info", "modulename": "zanj.zanj", "qualname": "ZANJ.externals_info", "kind": "function", "doc": "<p>return information about the current externals</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"nb\">str</span> <span class=\"o\">|</span> <span class=\"nb\">int</span> <span class=\"o\">|</span> <span class=\"nb\">list</span><span class=\"p\">[</span><span class=\"nb\">int</span><span class=\"p\">]]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.zanj.ZANJ.meta", "modulename": "zanj.zanj", "qualname": "ZANJ.meta", "kind": "function", "doc": "<p>return the metadata of the ZANJ archive</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"bp\">self</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">bool</span><span class=\"p\">,</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">float</span><span class=\"p\">,</span> <span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">NoneType</span><span class=\"p\">,</span> <span class=\"n\">List</span><span class=\"p\">[</span><span class=\"n\">Any</span><span class=\"p\">],</span> <span class=\"n\">Dict</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">Any</span><span class=\"p\">]]]]</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.zanj.ZANJ.save", "modulename": "zanj.zanj", "qualname": "ZANJ.save", "kind": "function", "doc": "<p>save the object to a ZANJ archive. returns the path to the archive</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">obj</span><span class=\"p\">:</span> <span class=\"n\">Any</span>, </span><span class=\"param\"><span class=\"n\">file_path</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">|</span> <span class=\"n\">pathlib</span><span class=\"o\">.</span><span class=\"n\">_local</span><span class=\"o\">.</span><span class=\"n\">Path</span></span><span class=\"return-annotation\">) -> <span class=\"nb\">str</span>:</span></span>", "funcdef": "def"}, {"fullname": "zanj.zanj.ZANJ.read", "modulename": "zanj.zanj", "qualname": "ZANJ.read", "kind": "function", "doc": "<p>load the object from a ZANJ archive</p>\n\n<h1 id=\"todo-load-only-some-part-of-the-zanj-file-by-passing-an-objectpath\">TODO: load only some part of the zanj file by passing an ObjectPath</h1>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">file_path</span><span class=\"p\">:</span> <span class=\"n\">Union</span><span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">pathlib</span><span class=\"o\">.</span><span class=\"n\">_local</span><span class=\"o\">.</span><span class=\"n\">Path</span><span class=\"p\">]</span></span><span class=\"return-annotation\">) -> <span class=\"n\">Any</span>:</span></span>", "funcdef": "def"}];

    // mirrored in build-search-index.js (part 1)
    // Also split on html tags. this is a cheap heuristic, but good enough.
    elasticlunr.tokenizer.setSeperator(/[\s\-.;&_'"=,()]+|<[^>]*>/);

    let searchIndex;
    if (docs._isPrebuiltIndex) {
        console.info("using precompiled search index");
        searchIndex = elasticlunr.Index.load(docs);
    } else {
        console.time("building search index");
        // mirrored in build-search-index.js (part 2)
        searchIndex = elasticlunr(function () {
            this.pipeline.remove(elasticlunr.stemmer);
            this.pipeline.remove(elasticlunr.stopWordFilter);
            this.addField("qualname");
            this.addField("fullname");
            this.addField("annotation");
            this.addField("default_value");
            this.addField("signature");
            this.addField("bases");
            this.addField("doc");
            this.setRef("fullname");
        });
        for (let doc of docs) {
            searchIndex.addDoc(doc);
        }
        console.timeEnd("building search index");
    }

    return (term) => searchIndex.search(term, {
        fields: {
            qualname: {boost: 4},
            fullname: {boost: 2},
            annotation: {boost: 2},
            default_value: {boost: 2},
            signature: {boost: 2},
            bases: {boost: 2},
            doc: {boost: 1},
        },
        expand: true
    });
})();